<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BPA Mental Health Support Chatbot</title>
<style>
  #back_button{
    background-color: #1e40af;
    height: 50px;
    width: 50px;
    border-radius: 3px;
    color: white;
  }
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;background:linear-gradient(135deg,#f0f8ff 0%,#ffffff 50%,#f0fff0 100%);min-height:100vh}
.header{background:#fff;box-shadow:0 2px 4px rgba(0,0,0,.1);border-bottom:1px solid #e5e5e5}
.header-content{max-width:1024px;margin:auto;padding:16px;display:flex;align-items:center;gap:12px}
.header-icon{background:#dbeafe;padding:8px;border-radius:50%;display:flex;align-items:center;justify-content:center}
.header-icon svg{width:24px;height:24px;color:#2563eb}
.header-text h1{font-size:1.25rem;font-weight:600;color:#1f2937;margin-bottom:2px}
.header-text p{font-size:.875rem;color:#6b7280}
.chat-room-selector{max-width:1024px;margin:20px auto;padding:16px;background:#fff;border:1px solid #e5e5e5;border-radius:8px;box-shadow:0 1px 3px rgba(0,0,0,.1)}
.chat-room-selector h2{font-size:1rem;margin-bottom:8px;color:#1f2937}
.chat-room-selector input{padding:8px;border:1px solid #d1d5db;border-radius:8px;font-size:1rem}
.chat-room-selector button{margin-left:8px;padding:8px 12px;background:#2563eb;color:#fff;border:none;border-radius:8px;cursor:pointer}
.chat-room-selector button:hover{background:#1d4ed8}
.main-container{max-width:1024px;margin:auto;padding:16px;height:calc(100vh - 120px);display:none;flex-direction:column}
.disclaimer{background:#eff6ff;border:1px solid #bfdbfe;border-radius:8px;padding:12px;margin-bottom:16px;display:flex;align-items:flex-start;gap:8px}
.disclaimer svg{width:20px;height:20px;color:#2563eb;margin-top:2px;flex-shrink:0}
.disclaimer-text{font-size:.875rem;color:#1e40af}
.chat-container{flex:1;background:#fff;border-radius:8px;box-shadow:0 1px 3px rgba(0,0,0,.1);border:1px solid #e5e5e5;display:flex;flex-direction:column;overflow:hidden}
.messages-area{flex:1;overflow-y:auto;padding:16px;display:flex;flex-direction:column;gap:16px}
.message{display:flex;gap:12px;align-items:flex-end}
.message.user{flex-direction:row-reverse}
.message-avatar{width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;flex-shrink:0}
.message.user .message-avatar{background:#2563eb;color:#fff}
.message.assistant .message-avatar{background:#dcfce7;color:#16a34a}
.message-avatar svg{width:16px;height:16px}
.message-content{max-width:70%}
.message.user .message-content{text-align:right}
.message-bubble{padding:12px;border-radius:8px;margin-bottom:4px;word-wrap:break-word}
.message.user .message-bubble{background:#2563eb;color:#fff}
.message.assistant .message-bubble{background:#f3f4f6;color:#1f2937}
.message-time{font-size:.75rem;color:#6b7280}
.input-area{border-top:1px solid #e5e5e5;padding:16px;background:#f9fafb}
.input-row{display:flex;gap:8px}
.message-input{flex:1;border:1px solid #d1d5db;border-radius:8px;padding:8px 12px;font-size:1rem;font-family:inherit;resize:vertical;min-height:40px;max-height:120px;outline:none;transition:border-color .2s}
.message-input:focus{border-color:#2563eb;box-shadow:0 0 0 3px rgba(37,99,235,.1)}
.send-button{background:#2563eb;color:#fff;border:none;border-radius:8px;padding:8px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background .2s}
.send-button:hover:not(:disabled){background:#1d4ed8}
.send-button:disabled{opacity:.5;cursor:not-allowed}
</style>
</head>
<body>
<!-- Header -->
<div class="header">
  <div class="header-content">
    <a href="index.html"><button id="back_button">Back</button></a>
    <div class="header-icon">
      <svg fill="currentColor" viewBox="0 0 20 20">
        <path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd"/>
      </svg>
    </div>
    <div class="header-text">
      <h1>Mental Health Support</h1>
      <p>Confidential AI support â€¢ Available 24/7</p>
    </div>
  </div>
</div>

<!-- Room Selector -->
<div class="chat-room-selector">
  <h2>Join a Chat Room</h2>
  <input type="text" id="roomNameInput" placeholder="Enter room name..." />
  <button onclick="joinRoom()">Join</button>
  <div id="currentRoom" style="margin-top:10px;font-weight:bold;"></div>
</div>

<!-- Main Container -->
<div class="main-container" id="mainContainer">
  <div class="disclaimer">
    <svg fill="currentColor" viewBox="0 0 20 20">
      <path fill-rule="evenodd" d="M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
    </svg>
    <div class="disclaimer-text"><strong>Important:</strong> This chatbot provides peer support and resources, not professional therapy. For emergencies, call 988 or 911.</div>
  </div>

  <!-- Chat Container -->
  <div class="chat-container">
    <div class="messages-area" id="messagesArea"></div>
    <div class="input-area">
      <div class="input-row">
        <textarea class="message-input" id="messageInput" placeholder="Type..." rows="1"></textarea>
        <button class="send-button" id="sendButton" onclick="sendMessage()" disabled>Send</button>
      </div>
    </div>
  </div>
</div>

<script>
let rooms = {};
let currentRoom = null;

function joinRoom() {
  const roomInput = document.getElementById("roomNameInput");
  const roomName = roomInput.value.trim();
  if (!roomName) return;

  currentRoom = roomName;
  if (!rooms[currentRoom]) {
    rooms[currentRoom] = [];
  }

  document.getElementById("currentRoom").innerText = "Room: " + currentRoom;
  document.getElementById("mainContainer").style.display = "flex";

  renderMessages();
}

function renderMessages() {
  const messagesArea = document.getElementById("messagesArea");
  messagesArea.innerHTML = "";

  if (!currentRoom) return;
  const messages = rooms[currentRoom];

  messages.forEach(msg => {
    const messageDiv = document.createElement("div");
    messageDiv.className = `message ${msg.sender}`;
    messageDiv.innerHTML = `
      <div class="message-avatar">
        ${msg.sender === "user" ? "ðŸ˜Š" : "ðŸ¤–"}
      </div>
      <div class="message-content">
        <div class="message-bubble">${msg.text}</div>
        <div class="message-time">${msg.time}</div>
      </div>
    `;
    messagesArea.appendChild(messageDiv);
  });

  messagesArea.scrollTop = messagesArea.scrollHeight;
}

function sendMessage() {
  const input = document.getElementById("messageInput");
  const text = input.value.trim();
  if (!text || !currentRoom) return;

  const message = {
    sender: "user",
    text,
    time: new Date().toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'})
  };

  rooms[currentRoom].push(message);
  input.value = "";
  document.getElementById("sendButton").disabled = true;
  renderMessages();

  // Simple bot reply (demo)
  setTimeout(() => {
    const reply = {
      sender: "assistant",
      text: "I hear you. You're not alone in this ðŸ’™",
      time: new Date().toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'})
    };
    rooms[currentRoom].push(reply);
    renderMessages();
  }, 1000);
}

// Enable/disable Send button dynamically
document.getElementById("messageInput").addEventListener("input", (e) => {
  document.getElementById("sendButton").disabled = !e.target.value.trim();
});

// Allow Enter key to send
document.getElementById("messageInput").addEventListener("keypress", (e) => {
  if (e.key === "Enter" && !e.shiftKey) {
    e.preventDefault();
    sendMessage();
  }
});
</script>
</body>
</html>
